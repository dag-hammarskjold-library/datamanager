{% extends 'base.html' %} {% block content %}
<div class="container">
    <div class="row">
        <form class="form-inline" action="{{url_for('search_records', coll=coll)}}">
            {% if q %}
            <input id="q" name="q" class="form-control mr-sm-2" type="search" aria-label="Search {{coll}} collection" value="{{q}}"> {% else %}
            <input id="q" name="q" class="form-control mr-sm-2" type="search" placeholder="Search {{coll}} collection" aria-label="Search this collection"> {% endif %}
            <button class="btn btn-primary" type="submit" id="search-btn" value="Search">Search</button>
        </form>
    </div>
    <div class="row">
        <p>
            {% set rpp = [10,50,100,500,1000] %}
            Results:
            
            {% if limit|int in rpp %}
                {% for o in rpp %}
                    {% if limit|int == o %}
                        {{o}}
                    {% else %}
                        <a href="{{url_for('search_records', coll=coll, q=q, limit=o, sort=sort, direction=direction)}}">{{o}}</a>
                    {% endif %}
                {% endfor %}
            {% else %}
                {{limit}}
                {% for o in rpp %}
                    <a href="{{url_for('search_records', coll=coll, q=q, limit=o, sort=sort, direction=direction)}}">{{o}}</a>
                {% endfor %}
            {% endif %}
            &nbsp;|&nbsp;
            Sort: updated 
            {% for o in ["asc","desc"] %}
                {% if direction == o %}
                    {{o}}
                {% else %}
                    <a href="{{url_for('search_records', coll=coll, q=q, limit=limit, sort=sort, direction=o)}}">{{o}}</a>
                {% endif %}
            {% endfor %}
        </p>
    </div>
    {% for record in records %}
    <div class="row pt-2 border-bottom">
        <div class="container">
            <div class="row">
                <a class="lead" href="{{ url_for('get_record_by_id', coll=coll, id=record['id']) }}">
                    {{record['title_line']}}
                </a>
            </div>
            <div class="row">
                <p>{{record['second_line']}}</p>
            </div>
        </div>
    </div>
    {% endfor %}
    <nav>
        <ul class="pagination pagination-md justify-content-center">
            {% for k,v in [("Previous", prev_page), ("Next", next_page)] %}
                {% if v is not none %}
                <li class="page-item">
                    <a class="page-link" href="{{v}}">{{k}}</a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <a class="page-link" href="{{v}}">{{k}}</a>
                </li>
                {% endif %}
            {% endfor %}
        </ul>
    </nav>
</div>
{% endblock %}